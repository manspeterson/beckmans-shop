<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!--<link rel="stylesheet" href="css/main.css"> -->
        <style type="text/css">
        	.hidden {
        		display: none;
        	}
        </style>
    </head>
    <body>
 
        <p>Hello world! This is HTML5 Boilerplate.</p>
        <form id="form" name="buy" netlify-honeypot="bot-field" action="thank-you" netlify>
		  <p class="hidden">
		    <label>Don’t fill this out: <input name="bot-field"></label>
		  </p>
		  <p>
		    <label>Email: <input type="email" name="buyer-email"></label>
		    <label>Name: <input type="text" name="buyer-name"></label>
		    <label>Address: <input type="text" name="buyer-address"></label>
		  </p>
		  <p>
		  	<input type="email" name="seller-email" value="mans.peterson@edu.beckmans.se" hidden>
		  	<input type="number" name="seller-phone" value="0703550605" hidden>
		  	<input type="number" name="price" value="150" hidden>
		  	<input type="data" id="qr-code" name="qr-code" value="" hidden>
        <input type="file" id="file" name="file" value="">
		    <button type=”submit”>Send</button>
		  </p>
		</form>

    <script src="js/jquery-3.2.1.min.js"></script>
      <script type="text/javascript">
        $(function() {
            data = {"message" : {"value" : "asfjasfjasppa"}, "payee" : {"value" : "0704550605"}, "amount" : {"value" : 100}, "format" : "jpg", "size" : 400};
           var settings = {
                "async": true,
                "crossDomain": true,
                "url": "/swish-api/",
                "method": "POST",
                "headers": {
                  "content-type": "application/json",
                  "Access-Control-Allow-Headers" : "x-requested-with"
                },
                "processData": false,
                "data": JSON.stringify(data)
              }

              $.ajax(settings).done(function (response) {
                // $('#qr-code').attr('value', response);
                document.getElementById('qr-code').setAttribute("value", response);
                console.log(response.data);
              });
        });
      	$("#form").submit(function(e) {
		  e.preventDefault();

		  var $form = $(this);
		  $.post($form.attr("action"), $form.serialize()).then(function() {
		    alert("Thank you!");
		  });
		});
      </script>
    </body>
</html>